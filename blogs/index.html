<!doctype html><html>
<head>
<title>Blogs</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no">
<link rel=stylesheet href=https://dhruvagole.tech/assets/css/main.css>
<link rel=canonical href=https://dhruvagole.tech/blogs/>
<noscript><link rel=stylesheet href=https://dhruvagole.tech/assets/css/noscript.css></noscript>
<style>:root{--site-background:url("https://dhruvagole.tech/images/codebinary.jpg")}</style>
<script src=https://identity.netlify.com/v1/netlify-identity-widget.js></script>
</head>
<body class=is-preload>
<div id=wrapper>
<header id=header>
<div class=logo>
<a href=/>
<span class=icon>
<img src=../images/dot.png>
</span>
</a>
</div>
<div class=content>
<div class=inner>
<h1>Blogs</h1>
</div>
</div>
<nav>
<ul>
<li><a href=https://dhruvagole.tech/blogs/more/>Blogs</a></li>
<li>
<a href=#esp32-voltmeter>ESP32 Voltmeter</a>
</li>
<li>
<a href=#gdb>GDB</a>
</li>
<li>
<a href=#the-eigen-library>The Eigen Library</a>
</li>
</ul>
</nav>
</header>
<div id=main>
<article id=esp32-voltmeter>
<h2 class=major>ESP32 Voltmeter</h2>
<span class="image main"><img src alt></span>
<p>Repository: <a href=https://github.com/DhruvaG2000/ESP32-ADS1115>ESP32-ADS1115</a></p>
<h2 id=esp32-ads1115>ESP32-ADS1115</h2>
<p>This repo in detail shows how to make a voltmeter using <a href=https://github.com/UncleRus/esp-idf-lib>unclerus ADS111X library</a> in <strong>ESP IDF</strong></p>
<h3 id=steps>Steps:</h3>
<ol>
<li>clone the library to your <code>~/esp/</code>.</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>cd ~/esp/
git clone https://github.com/UncleRus/esp-idf-lib.git
</code></pre></div><ol start=2>
<li>Clone this repo.</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>git clone https://github.com/DhruvaG2000/ESP32-ADS1115
</code></pre></div><ol start=3>
<li>Make connections as shown:</li>
</ol>
<table>
<thead>
<tr>
<th>S. No.</th>
<th>ADS 1115</th>
<th>ESP 32</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.</td>
<td>V_DD</td>
<td>V_in or 5V source</td>
</tr>
<tr>
<td>2.</td>
<td>GND</td>
<td>GND</td>
</tr>
<tr>
<td>3.</td>
<td>SCL</td>
<td>D22</td>
</tr>
<tr>
<td>4.</td>
<td>SDA</td>
<td>D21</td>
</tr>
</tbody>
</table>
<p>And, Your analog input in A0</p>
<p>No other pins need any connections in my experience until now.</p>
<p>Feel free to tag me in forums or email me if you face any issues.</p>
<h3 id=helpful-pin-diagrams>Helpful Pin Diagrams</h3>
<span class="image fit">
<img src=https://circuits4you.com/wp-content/uploads/2018/12/ESP32-Pinout.jpg alt="ESP32 Pin Diagram">
</span>
<p><strong>ADS1115 Pin Diagram:</strong>
<span class="image fit">
<img src=https://cdn-shop.adafruit.com/1200x900/1085-02.jpg alt="ADS1115 Pin Diagram">
</span>
</p>
</article>
<article id=gdb>
<h2 class=major>GDB</h2>
<span class="image main"><img src alt></span>
<p><a href=https://dhruvag2000.github.io/gdb-for-noobs/>GDB for Noobs</a></p>
<h2 id=why-use-a-debugger>Why use a debugger?</h2>
<p>Most of us tend to have bugs in our code. We could use printing commands to test our code, or we could use a debugger. Many times our code might seem to work correctly, because we didn&rsquo;t test it under enough scenarios. Other times we know there&rsquo;s a bug, but by just reading the code we don&rsquo;t notice it is there. Thus, we should develop a habit of launching a debugger when we get into trouble.</p>
<h2 id=walkthrough>Walkthrough</h2>
<ul>
<li>
<p>for compiling your code to make it suitable for debugging using gdb:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>g++ -g <span style=color:#e6db74>&#34;buggy_factorial.cpp&#34;</span>
</code></pre></div></li>
<li>
<p>launching the gdb shell:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gdb a.out
</code></pre></div></li>
<li>
<p>basic commands we will be needing:</p>
<ul>
<li><code>(gdb) run</code> : runs the program.</li>
<li><code>(gdb) break file1.c:6</code> : Breakpoints can be used to stop the program run in the middle, at a designated point (we will see how its useful in the following example).</li>
<li><code>(gdb) break myfunc</code>: creates breakpoint at <code>myfunc</code> <strong>remember to use myfunc without the ()</strong></li>
<li><code>(gdb) step</code> or <code>(gdb) s</code> : execute just the next line of code.</li>
<li><code>(gdb) print (gdb) </code> or <code>(gdb) p (gdb) </code> : prints the value of the variable.</li>
<li><code>(gdb) watch myvar</code>: whenever myvarâ€™s value is modified, the program will interrupt and print out the old and new values.
trivial one&rsquo;s below&mldr;</li>
<li><code>finish </code> : runs until the current function is finished.</li>
<li><code>delete</code> : deletes a specified breakpoint.</li>
<li><code>info breakpoints</code> : shows information about all declared breakpoints.</li>
</ul>
</li>
<li>
<p>explanation with example:</p>
<ul>
<li>
<p>First, let&rsquo;s just run the code..
command:</p>
<pre tabindex=0><code>run
</code></pre><p>output:</p>
<pre tabindex=0><code>Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/a.out
enter any number:
4
The factorial of 4 is 1[Inferior 1 (process 14193) exited normally]
</code></pre><p>oops! Clearly the answer is wrong!!
Now, as a very inexperienced programmer, one would try to print at every iteration to see where the program might have gone wrong resulting in a very ugly looking code and also adding the unnecessary headache of having to track the line number of each print statement one had used for debugging their codes.
Now, let&rsquo;s see how gdb simplifies things for us&mldr;</p>
</li>
<li>
<p>creating breakpoints:
Since my factorial function is most probably messing up, I will add the breakpoint to it.
command:</p>
<pre tabindex=0><code>break factorial
</code></pre><p>output:</p>
<pre tabindex=0><code>Breakpoint 1 at 0x555555554993: file buggy_factorial.cpp, line 5.
</code></pre><p>now lets run it again&mldr; using <code>run</code>
output:</p>
<pre tabindex=0><code>Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/a.out
enter any number:
4

Breakpoint 1, factorial (n=4) at buggy_factorial.cpp:5
5	  double res=1;
</code></pre><p>as we can see, the program stopped just as the function was called. Now, instead of needing to manually add <code>print()</code> statements I will see why my code is buggy by watching the variables in my console itself!</p>
</li>
<li>
<p>watching the variable
Since it is likely that some variable is not working properly, let&rsquo;s start by watching the <code>res</code> variable.
command:
<code>watch res</code>
now the gdb console works in such a way that hitting enter will automatically take you to the next step where you expect to see some change in your variable as the while loop modifies it in each iteration&mldr;
hmm&mldr; something strange, the res variable isn&rsquo;t updating!
Well, so now that I observe that <code>res</code> isn&rsquo;t updating, the only reason I think is it must not be entering the while loop for some reason!</p>
<p>OK! So now I go back ad make changes in my while loop condition to
<code>while(n>=1)</code></p>
</li>
<li>
<p>Let&rsquo;s see if the issue is fixed!
Press <code>q</code> and then <code>y</code> to exit the gdb, and again compile your new program:</p>
<ul>
<li>
<p><code>g++ -g factorial.cpp -o fact</code></p>
</li>
<li>
<p><code>gdb fact</code></p>
</li>
<li>
<p><code>run</code></p>
</li>
<li>
<p>output:</p>
<pre tabindex=0><code>Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/fact
enter any number:
4
The factorial of 4 is 24[Inferior 1 (process 15039) exited normally]
</code></pre></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Thus using GDB we learned to debug a very basic code in c++. You can also try the other commands listed on top as per your own convenience and requirements.</p>
<h2 id=sources>sources:</h2>
<ul>
<li><a href=https://www.cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pdf>gdb-tutorial-handout</a></li>
<li><a href=http://www.math.bas.bg/~nkirov/2005/netb151/debugging-with-gdb.html>debugging-with-gdb</a></li>
</ul>
</article>
<article id=the-eigen-library>
<h2 class=major>The Eigen Library</h2>
<span class="image main"><img src alt></span>
<h2 id=introduction>Introduction</h2>
<p>Eigen is a C++ template library for linear algebra: matrices, vectors, numerical solvers, and related algorithms.</p>
<h2 id=installation>Installation</h2>
<p>My system is <code>Linux pop-os</code> so all I did was</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>git clone https://gitlab.com/libeigen/eigen.git
</code></pre></div><p>and then copied the <a href=https://gitlab.com/libeigen/eigen/-/tree/master/Eigen>Eigen folder</a> to <code>/usr/local/include</code> so I could include the headers without having to explicitly pass a <code>-I</code> option to <code>g++</code>.</p>
<h2 id=basic-matrix-operations>Basic Matrix operations</h2>
<p>To get the full source code, visit <a href=https://github.com/DhruvaG2000/Blog/extras/1.cpp>1.cpp</a>.</p>
<h3 id=matrix-declaration>Matrix Declaration</h3>
<p>You can use</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++>Eigen<span style=color:#f92672>::</span>MatrixXd m(<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>3</span>);
</code></pre></div><p>for Matrix declaration of specifyied size, in this case 3 by 3.</p>
<p>and for smaller matrices upto the size of 4 by 4, you can simple use</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++>Eigen<span style=color:#f92672>::</span>Matrix3d a;
</code></pre></div><p>where instead of 3 you can use 1,2 or 4 as well depending on the requirement.</p>
<h3 id=basic-operations>Basic Operations</h3>
<ul>
<li>For Martix Addition, Subtraction you can just use <code>+</code> or <code>-</code> as you would with any other data type like <code>float</code> or <code>int</code>.
In our case, the program output looks like:</li>
</ul>
<pre tabindex=0><code>Addition of two matrices: a + (inverse a)
 24.0595 -3.97619 -3.91667
-3.97619  24.0595 -3.91667
-3.91667 -3.91667  4.41667
</code></pre><ul>
<li>For finding the inverse of a matrix, simply use</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++>a.inverse();
</code></pre></div><ul>
<li>For Determinant:</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++>a.determinant();
</code></pre></div><ul>
<li>For storing the output of an operation into another matrix, use <code>&lt;&lt;</code> in the manner <code>matrixInv &lt;&lt; a.inverse()</code></li>
</ul>
<h2 id=references>References</h2>
<ul>
<li><a href=https://eigen.tuxfamily.org/dox/GettingStarted.html>Official Eigen Website Docs</a></li>
</ul>
</article>
</div>
<footer id=footer>
<p class=copyright>&copy; <a href=https://github.com/dhruvag2000>2021 Dhruva Gole</p>
</footer>
</div>
<div id=bg></div>
</body>
<script src=https://dhruvagole.tech/assets/js/jquery.min.js></script>
<script src=https://dhruvagole.tech/assets/js/browser.min.js></script>
<script src=https://dhruvagole.tech/assets/js/breakpoints.min.js></script>
<script src=https://dhruvagole.tech/assets/js/util.js></script>
<script src=https://dhruvagole.tech/assets/js/main.js></script>
</html>