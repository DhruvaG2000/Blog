<!doctype html><html>
<head>
<title>Blogs</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no">
<link rel=stylesheet href=https://dhruvagole.tech/assets/css/main.css>
<link rel=canonical href=https://dhruvagole.tech/blogs/>
<noscript><link rel=stylesheet href=https://dhruvagole.tech/assets/css/noscript.css></noscript>
<style>:root{--site-background:url("https://dhruvagole.tech/images/codebinary.jpg")}</style>
<script src=https://identity.netlify.com/v1/netlify-identity-widget.js></script>
</head>
<body class=is-preload>
<div id=wrapper>
<header id=header>
<div class=logo>
<a href=/>
<span class=icon>
<img src=../images/dot.png>
</span>
</a>
</div>
<div class=content>
<div class=inner>
<h1>Blogs</h1>
</div>
</div>
<nav>
<ul>
<li>
<a href=#esp32-voltmeter>ESP32 Voltmeter</a>
</li>
<li>
<a href=#gdb>GDB</a>
</li>
<li>
<a href=#gsoc2021>GSoC2021</a>
</li>
</ul>
</nav>
</header>
<div id=main>
<article id=esp32-voltmeter>
<h2 class=major>ESP32 Voltmeter</h2>
<span class="image main"><img src alt></span>
<p>Repository: <a href=https://github.com/DhruvaG2000/ESP32-ADS1115>ESP32-ADS1115</a></p>
<h2 id=esp32-ads1115>ESP32-ADS1115</h2>
<p>This repo in detail shows how to make a voltmeter using <a href=https://github.com/UncleRus/esp-idf-lib>unclerus ADS111X library</a> in <strong>ESP IDF</strong></p>
<h3 id=steps>Steps:</h3>
<ol>
<li>clone the library to your <code>~/esp/</code>.</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>cd ~/esp/
git clone https://github.com/UncleRus/esp-idf-lib.git
</code></pre></div><ol start=2>
<li>Clone this repo.</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>git clone https://github.com/DhruvaG2000/ESP32-ADS1115
</code></pre></div><ol start=3>
<li>Make connections as shown:</li>
</ol>
<table>
<thead>
<tr>
<th>S. No.</th>
<th>ADS 1115</th>
<th>ESP 32</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.</td>
<td>V_DD</td>
<td>V_in or 5V source</td>
</tr>
<tr>
<td>2.</td>
<td>GND</td>
<td>GND</td>
</tr>
<tr>
<td>3.</td>
<td>SCL</td>
<td>D22</td>
</tr>
<tr>
<td>4.</td>
<td>SDA</td>
<td>D21</td>
</tr>
</tbody>
</table>
<p>And, Your analog input in A0</p>
<p>No other pins need any connections in my experience until now.</p>
<p>Feel free to tag me in forums or email me if you face any issues.</p>
<h3 id=helpful-pin-diagrams>Helpful Pin Diagrams</h3>
<span class="image fit">
<img src=https://circuits4you.com/wp-content/uploads/2018/12/ESP32-Pinout.jpg alt="ESP32 Pin Diagram">
</span>
<p><strong>ADS1115 Pin Diagram:</strong>
<span class="image fit">
<img src=https://cdn-shop.adafruit.com/1200x900/1085-02.jpg alt="ADS1115 Pin Diagram">
</span>
</p>
</article>
<article id=gdb>
<h2 class=major>GDB</h2>
<span class="image main"><img src alt></span>
<p><a href=https://dhruvag2000.github.io/gdb-for-noobs/>GDB for Noobs</a></p>
<h2 id=why-use-a-debugger>Why use a debugger?</h2>
<p>Most of us tend to have bugs in our code. We could use printing commands to test our code, or we could use a debugger. Many times our code might seem to work correctly, because we didn&rsquo;t test it under enough scenarios. Other times we know there&rsquo;s a bug, but by just reading the code we don&rsquo;t notice it is there. Thus, we should develop a habit of launching a debugger when we get into trouble.</p>
<h2 id=walkthrough>Walkthrough</h2>
<ul>
<li>
<p>for compiling your code to make it suitable for debugging using gdb:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>g++ -g <span style=color:#e6db74>&#34;buggy_factorial.cpp&#34;</span>
</code></pre></div></li>
<li>
<p>launching the gdb shell:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gdb a.out
</code></pre></div></li>
<li>
<p>basic commands we will be needing:</p>
<ul>
<li><code>(gdb) run</code> : runs the program.</li>
<li><code>(gdb) break file1.c:6</code> : Breakpoints can be used to stop the program run in the middle, at a designated point (we will see how its useful in the following example).</li>
<li><code>(gdb) break myfunc</code>: creates breakpoint at <code>myfunc</code> <strong>remember to use myfunc without the ()</strong></li>
<li><code>(gdb) step</code> or <code>(gdb) s</code> : execute just the next line of code.</li>
<li><code>(gdb) print (gdb) </code> or <code>(gdb) p (gdb) </code> : prints the value of the variable.</li>
<li><code>(gdb) watch myvar</code>: whenever myvarâ€™s value is modified, the program will interrupt and print out the old and new values.
trivial one&rsquo;s below&mldr;</li>
<li><code>finish </code> : runs until the current function is finished.</li>
<li><code>delete</code> : deletes a specified breakpoint.</li>
<li><code>info breakpoints</code> : shows information about all declared breakpoints.</li>
</ul>
</li>
<li>
<p>explanation with example:</p>
<ul>
<li>
<p>First, let&rsquo;s just run the code..
command:</p>
<pre><code>run
</code></pre><p>output:</p>
<pre><code>Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/a.out
enter any number:
4
The factorial of 4 is 1[Inferior 1 (process 14193) exited normally]
</code></pre><p>oops! Clearly the answer is wrong!!
Now, as a very inexperienced programmer, one would try to print at every iteration to see where the program might have gone wrong resulting in a very ugly looking code and also adding the unnecessary headache of having to track the line number of each print statement one had used for debugging their codes.
Now, let&rsquo;s see how gdb simplifies things for us&mldr;</p>
</li>
<li>
<p>creating breakpoints:
Since my factorial function is most probably messing up, I will add the breakpoint to it.
command:</p>
<pre><code>break factorial
</code></pre><p>output:</p>
<pre><code>Breakpoint 1 at 0x555555554993: file buggy_factorial.cpp, line 5.
</code></pre><p>now lets run it again&mldr; using <code>run</code>
output:</p>
<pre><code>Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/a.out
enter any number:
4

Breakpoint 1, factorial (n=4) at buggy_factorial.cpp:5
5	  double res=1;
</code></pre><p>as we can see, the program stopped just as the function was called. Now, instead of needing to manually add <code>print()</code> statements I will see why my code is buggy by watching the variables in my console itself!</p>
</li>
<li>
<p>watching the variable
Since it is likely that some variable is not working properly, let&rsquo;s start by watching the <code>res</code> variable.
command:
<code>watch res</code>
now the gdb console works in such a way that hitting enter will automatically take you to the next step where you expect to see some change in your variable as the while loop modifies it in each iteration&mldr;
hmm&mldr; something strange, the res variable isn&rsquo;t updating!
Well, so now that I observe that <code>res</code> isn&rsquo;t updating, the only reason I think is it must not be entering the while loop for some reason!</p>
<p>OK! So now I go back ad make changes in my while loop condition to
<code>while(n>=1)</code></p>
</li>
<li>
<p>Let&rsquo;s see if the issue is fixed!
Press <code>q</code> and then <code>y</code> to exit the gdb, and again compile your new program:</p>
<ul>
<li>
<p><code>g++ -g factorial.cpp -o fact</code></p>
</li>
<li>
<p><code>gdb fact</code></p>
</li>
<li>
<p><code>run</code></p>
</li>
<li>
<p>output:</p>
<pre><code>Starting program: /home/dhruva/Documents/studies/maths/gdb-for-noobs/fact
enter any number:
4
The factorial of 4 is 24[Inferior 1 (process 15039) exited normally]
</code></pre></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Thus using GDB we learned to debug a very basic code in c++. You can also try the other commands listed on top as per your own convenience and requirements.</p>
<h2 id=sources>sources:</h2>
<ul>
<li><a href=https://www.cs.umd.edu/~srhuang/teaching/cmsc212/gdb-tutorial-handout.pdf>gdb-tutorial-handout</a></li>
<li><a href=http://www.math.bas.bg/~nkirov/2005/netb151/debugging-with-gdb.html>debugging-with-gdb</a></li>
</ul>
</article>
<article id=gsoc2021>
<h2 class=major>GSoC2021</h2>
<span class="image main"><img src alt></span>
<p>
<span class="image fit"><img src=/images/gsoc-intro.png alt></span>
</p>
<p><a href=https://dhruvag2000.github.io/Blog-GSoC21/>GSoC2021: Bela support for BeagleBone AI</a></p>
<p>Bela is a hardware and software system for creating beautiful interaction with sensors and sound. This project proposes to provide restructuring and improvement of existing Bela Software Code to allow for compatibility and easier transition to newer TI chips (like in the BBAI).</p>
<p>The <em>final product</em> as a result of this project is&mldr;</p>
<span class="image fit"><img src=/images/BELA-AI.png alt></span>
</article>
</div>
<footer id=footer>
<p class=copyright>&copy; <a href=https://github.com/dhruvag2000>DhruvaG2000</p>
<p class=copyright>&copy; Design: <a href=https://github.com/d-asnaghi>d-asnaghi</a> and <a href=https://html5up.net>HTML5 UP</a>.</p>
</footer>
</div>
<div id=bg></div>
</body>
<script src=https://dhruvagole.tech/assets/js/jquery.min.js></script>
<script src=https://dhruvagole.tech/assets/js/browser.min.js></script>
<script src=https://dhruvagole.tech/assets/js/breakpoints.min.js></script>
<script src=https://dhruvagole.tech/assets/js/util.js></script>
<script src=https://dhruvagole.tech/assets/js/main.js></script>
</html>